<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  body{margin:0;background:transparent;}

  .track{
    position:relative;
    width:100%;
    height:120px;
    overflow:hidden;
  }

  .end{
    position:absolute;
    bottom:6px;
    font-size:28px;
    user-select:none;
  }
  .home{left:0;}
  .air{right:0;}

  .shuttle{
    position:absolute;
    bottom:2px;
    width:72px;
    z-index:3;
  }
  .hidden{ display:none; }

  .trail{
    position:absolute;
    height:30px;
    overflow:hidden;
    z-index:2;
    pointer-events:none;
  }

  .trail span{
    white-space:nowrap;
    font-family:'Inter',sans-serif;
    font-size:14px;
    font-weight:400;
    letter-spacing:0.8px;
    text-transform:uppercase;
    color:red;              /* ‚úÖ RED TEXT FOR TEST */
  }
</style>
</head>
<body>

<div class="track" id="track">
  <div class="trail" id="trail">
    <span id="text"></span>
  </div>

  <div class="end home">üè†</div>
  <div class="end air">‚úàÔ∏è</div>

  <!-- Right facing -->
  <svg class="shuttle" id="shuttleR" viewBox="0 0 220 120">
    <rect x="20" y="35" width="150" height="45" rx="12" fill="#111"/>
    <rect x="155" y="45" width="35" height="35" rx="10" fill="#111"/>
    <circle cx="60" cy="88" r="13" fill="#000"/>
    <circle cx="140" cy="88" r="13" fill="#000"/>
  </svg>

  <!-- Left facing -->
  <svg class="shuttle hidden" id="shuttleL" viewBox="0 0 220 120">
    <g transform="translate(220,0) scale(-1,1)">
      <rect x="20" y="35" width="150" height="45" rx="12" fill="#111"/>
      <rect x="155" y="45" width="35" height="35" rx="10" fill="#111"/>
      <circle cx="60" cy="88" r="13" fill="#000"/>
      <circle cx="140" cy="88" r="13" fill="#000"/>
    </g>
  </svg>
</div>

<script>
(function(){

var track = document.getElementById("track");
var tail  = document.getElementById("trail");
var text  = document.getElementById("text");
var R     = document.getElementById("shuttleR");
var L     = document.getElementById("shuttleL");

var lines = [
  "WELCOME TO TAPS SHUTTLES",
  "MATAMATA-PIAKO BASED SERVICE ‚Äî DOOR TO DOOR DIRECT",
  "HAMILTON AIRPORT ‚Üí TE AROHA FROM $110",
  "HAMILTON AIRPORT ‚Üí MORRINSVILLE FROM $110",
  "HAMILTON AIRPORT ‚Üí MATAMATA FROM $120",
  "TE AROHA ‚Üí AUCKLAND AIRPORT FROM $230",
  "SEE OUR SUPER DEALS BELOW ‚úàÔ∏è"
];

var legMs = 10000;   // shuttle speed
var pauseMs = 300;
var padding = 60;
var gap = 14;

var dir = 1;
var idx = 0;
var start = performance.now();
var wait = 0;

text.innerHTML = lines[0];

function ease(t){
  return 0.5 - 0.5*Math.cos(Math.PI*t);
}

function show(el){ el.classList.remove("hidden"); }
function hide(el){ el.classList.add("hidden"); }

function loop(now){

  if(now < wait){
    requestAnimationFrame(loop);
    return;
  }

  var active = (dir===1) ? R : L;
  var other  = (dir===1) ? L : R;
  show(active);
  hide(other);

  var w = track.clientWidth;
  var shuttleW = active.getBoundingClientRect().width || 72;

  var min = padding;
  var max = w - shuttleW - padding;

  var t = (now - start)/legMs;
  if(t>1) t=1;

  var p = ease(t);

  var x = (dir===1)
    ? min + (max-min)*p
    : min + (max-min)*(1-p);

  R.style.left = x+"px";
  L.style.left = x+"px";

  var sr = active.getBoundingClientRect();
  var tr = track.getBoundingClientRect();

  // Pixel-synced reveal
  if(dir===1){
    var endX = (sr.left - tr.left) - gap;
    var width = Math.max(0, endX - min);
    tail.style.left = min+"px";
    tail.style.width = width+"px";
    tail.style.textAlign="right";
  }else{
    var startX = (sr.right - tr.left) + gap;
    var width2 = Math.max(0, (max + shuttleW) - startX);
    tail.style.left = startX+"px";
    tail.style.width = width2+"px";
    tail.style.textAlign="left";
  }

  if(t>=1){
    dir*=-1;
    start=now;
    wait=now+pauseMs;
    idx=(idx+1)%lines.length;
    text.innerHTML=lines[idx];
  }

  requestAnimationFrame(loop);
}

requestAnimationFrame(loop);

})();
</script>

</body>
</html>
